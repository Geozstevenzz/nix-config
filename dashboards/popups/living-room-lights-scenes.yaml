type: vertical-stack
card_mod:
  style: |
    :host { display: none !important; }
cards:
  - type: custom:bubble-card
    card_type: pop-up
    hash: '#living-room-lights-scenes'
    name: Living Room Lights
    icon: mdi:sofa
    back_open: false
    close_by_clicking_outside: true
    bg_opacity: '88'
    bg_blur: '14'
    margin_top_mobile: '0'
    margin_top_desktop: '0'
    width_desktop: 540px
    is_sidebar_hidden: true
    background_update: false
    auto_close: 60000
    show_header: true
    sub_button:
    - icon: mdi:tune
      name: Control
      tap_action:
        action: navigate
        navigation_path: '#living-room-lights'
    - icon: mdi:palette
      name: Scenes
      tap_action:
        action: navigate
        navigation_path: '#living-room-lights-scenes'
    - icon: mdi:lightbulb
      name: Lights
      tap_action:
        action: navigate
        navigation_path: '#living-room-lights-lights'
  - type: custom:bubble-card
    card_type: separator
    name: Hue Scenes
    icon: mdi:palette
  - type: custom:auto-entities
    card:
      type: grid
      columns: 4
      square: false
    card_param: cards
    filter:
      template: |-
        {% set scenes = states.scene | selectattr('entity_id', 'match', 'scene.living_room_') | list %}
        {% for scene in scenes | sort(attribute='attributes.friendly_name') %}
          {%- set scene_name = scene.attributes.friendly_name | replace('Living Room ', '') | replace('Living room ', '') -%}
          {
            "type": "custom:bubble-card",
            "card_type": "button",
            "button_type": "name",
            "show_icon": true,
            "name": "{{ scene_name }}",
            "entity": "{{ scene.entity_id }}",
            "card_layout": "normal",
            "styles": "ha-card { height: 36px !important; } .bubble-container { height: 36px !important; } .bubble-name { font-size: 11px !important; } .bubble-icon-container { min-width: 28px !important; min-height: 28px !important; margin: 4px !important; } .bubble-icon { --mdc-icon-size: 18px !important; }",
            "button_action": {
              "tap_action": {
                "action": "call-service",
                "service": "scene.turn_on",
                "service_data": {"entity_id": "{{ scene.entity_id }}"}
              }
            }
          }{%- if not loop.last -%},{%- endif -%}
        {% endfor %}
