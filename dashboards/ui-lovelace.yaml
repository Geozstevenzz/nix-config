title: Home
views:
- title: Overview
  path: overview
  icon: mdi:home
  theme: default
  cards:
  - type: custom:bubble-card
    card_type: button
    button_type: slider
    entity: light.living_room
    name: Living Room
    icon: mdi:sofa
    show_state: true
    show_last_changed: false
    show_attribute: true
    attribute: brightness
    slider_live_update: false
    allow_light_slider_to_0: false
    card_layout: large
    sub_button:
    - entity: binary_sensor.front_door_window_door_is_open
      icon: mdi:door-closed
      name: Door
      show_state: false
      show_background: true
      show_icon: true
      styles: |-
        .bubble-sub-button {
          {% if is_state('binary_sensor.front_door_window_door_is_open', 'on') %}
            background-color: rgba(239, 83, 80, 0.3) !important;
          {% else %}
            background-color: rgba(76, 175, 80, 0.3) !important;
          {% endif %}
        }
        .bubble-sub-button-icon {
          --mdc-icon-size: 26px;
        }
        ha-icon {
          {% if is_state('binary_sensor.front_door_window_door_is_open', 'on') %}
            --card-mod-icon: mdi:door-open;
            color: #ef5350 !important;
          {% else %}
            --card-mod-icon: mdi:door-closed;
            color: #43a047 !important;
          {% endif %}
        }
    - icon: mdi:dots-horizontal
      show_background: false
      tap_action:
        action: navigate
        navigation_path: '#living-room-lights'
    tap_to_slide: true
    button_action:
      hold_action:
        action: navigate
        navigation_path: '#living-room-lights'
  - type: custom:bubble-card
    card_type: button
    button_type: state
    entity: cover.garage_door_opener_d81e60_door1
    name: Garage
    icon: mdi:garage-variant
    show_state: true
    show_last_changed: true
    styles: |-
      ha-card {
        {% if is_state('cover.garage_door_opener_d81e60_door1', 'open') %}
          --bubble-button-background-color: rgba(41, 182, 246, 0.22) !important;
          --bubble-button-icon-background-color: rgba(25, 118, 210, 0.65) !important;
        {% else %}
          --bubble-button-background-color: rgba(120, 144, 156, 0.20) !important;
          --bubble-button-icon-background-color: rgba(55, 71, 79, 0.55) !important;
        {% endif %}
      }
      .bubble-icon {
        {% if is_state('cover.garage_door_opener_d81e60_door1', 'open') %}
          color: #BBDEFB !important;
        {% else %}
          color: #ECEFF1 !important;
        {% endif %}
      }
      .bubble-name,
      .bubble-state {
        {% if is_state('cover.garage_door_opener_d81e60_door1', 'open') %}
          color: #0D47A1 !important;
        {% else %}
          color: #37474F !important;
        {% endif %}
      }
    sub_button:
    - icon: mdi:arrow-up-bold-circle
      name: Open
      show_background: true
      tap_action:
        action: call-service
        service: cover.open_cover
        service_data:
          entity_id: cover.garage_door_opener_d81e60_door1
      styles: |-
        .bubble-sub-button {
          {% if is_state('cover.garage_door_opener_d81e60_door1', 'open') %}
            display: none !important;
          {% else %}
            background-color: rgba(120, 144, 156, 0.20) !important;
            border-radius: 16px;
          {% endif %}
        }
        .bubble-sub-button-icon {
          --mdc-icon-size: 24px;
          color: #455A64 !important;
        }
        .bubble-sub-button-name {
          font-size: 12px;
          color: #37474F !important;
        }
    - icon: mdi:arrow-down-bold-circle
      name: Close
      show_background: true
      tap_action:
        action: call-service
        service: cover.close_cover
        service_data:
          entity_id: cover.garage_door_opener_d81e60_door1
      styles: |-
        .bubble-sub-button {
          {% if is_state('cover.garage_door_opener_d81e60_door1', 'open') %}
            background-color: rgba(25, 118, 210, 0.22) !important;
            border-radius: 16px;
          {% else %}
            display: none !important;
          {% endif %}
        }
        .bubble-sub-button-icon {
          --mdc-icon-size: 24px;
          color: #1565C0 !important;
        }
        .bubble-sub-button-name {
          font-size: 12px;
          color: #0D47A1 !important;
        }
    button_action:
      tap_action:
        action: more-info
      double_tap_action:
        action: none
      hold_action:
        action: more-info
    tap_action:
      action: more-info
    hold_action:
      action: more-info
  - type: custom:bubble-card
    card_type: button
    button_type: slider
    entity: light.master_bedroom
    name: Main Bedroom
    icon: mdi:bed
    show_state: true
    show_last_changed: false
    show_attribute: true
    attribute: brightness
    slider_live_update: false
    allow_light_slider_to_0: false
    card_layout: large
    sub_button:
    - icon: mdi:dots-horizontal
      show_background: false
      tap_action:
        action: navigate
        navigation_path: '#main-bedroom-lights'
    tap_to_slide: true
    button_action:
      hold_action:
        action: navigate
        navigation_path: '#main-bedroom-lights'
  - type: vertical-stack
    cards:
    - type: custom:bubble-card
      card_type: pop-up
      hash: '#living-room-lights'
      name: Living Room Lights
      icon: mdi:sofa
      back_open: false
      close_by_clicking_outside: true
      bg_opacity: '88'
      bg_blur: '14'
      margin_top_mobile: '0'
      margin_top_desktop: '0'
      width_desktop: 540px
      is_sidebar_hidden: false
      auto_close: 60000
    - type: custom:bubble-card
      card_type: separator
      name: Room Control
      icon: mdi:lightbulb-group
    - type: custom:bubble-card
      card_type: button
      button_type: slider
      entity: light.living_room
      name: All Lights
      icon: mdi:lightbulb-group
      show_state: true
      show_attribute: true
      attribute: brightness
      slider_live_update: false
      allow_light_slider_to_0: true
      sub_button:
      - entity: light.living_room
        icon: mdi:palette
        name: Color
        tap_action:
          action: more-info
      tap_to_slide: true
    - type: custom:bubble-card
      card_type: separator
      name: Hue Scenes
      icon: mdi:palette
    - type: custom:auto-entities
      card:
        type: grid
        columns: 4
        square: false
      card_param: cards
      filter:
        template: |-
          {% set scenes = states.scene | selectattr('entity_id', 'match', 'scene.living_room_') | list %}
          {% for scene in scenes | sort(attribute='attributes.friendly_name') %}
            {%- set scene_name = scene.attributes.friendly_name | replace('Living Room ', '') | replace('Living room ', '') -%}
            {%- set icon_map = {
              'USA': 'mdi:flag',
              'Read': 'mdi:book-open',
              'Ruby glow': 'mdi:fire',
              'Dimmed': 'mdi:brightness-3',
              'Bright': 'mdi:brightness-7',
              'Concentrate': 'mdi:target',
              'Energize': 'mdi:lightning-bolt',
              'Relax': 'mdi:spa',
              'Nightlight': 'mdi:weather-night',
              'Halloween': 'mdi:halloween',
              'Xmas': 'mdi:pine-tree',
              'Arctic aurora': 'mdi:aurora',
              'Spring blossom': 'mdi:flower',
              'Tropical twilight': 'mdi:palm-tree',
              'Savanna sunset': 'mdi:weather-sunset',
              'Nebula': 'mdi:creation',
              'Rainbow': 'mdi:looks',
              'Ibiza': 'mdi:party-popper',
              'Sweden': 'mdi:flag',
              'Sunday morning': 'mdi:coffee',
              'Champagne': 'mdi:glass-flute',
              'Lavender': 'mdi:flower-outline',
              'Peach': 'mdi:fruit-cherries',
              'Circle': 'mdi:circle',
              'Blue white': 'mdi:snowflake'
            } -%}
            {%- set icon = icon_map.get(scene_name, 'mdi:palette') -%}
            {
              "type": "custom:bubble-card",
              "card_type": "button",
              "button_type": "name",
              "name": "{{ scene_name }}",
              "icon": "{{ icon }}",
              "entity": "{{ scene.entity_id }}",
              "card_layout": "normal",
              "styles": "ha-card { height: 36px !important; } .bubble-container { height: 36px !important; } .bubble-name { font-size: 11px !important; } .bubble-icon-container { min-width: 28px !important; min-height: 28px !important; margin: 4px !important; } .bubble-icon { --mdc-icon-size: 18px !important; }",
              "button_action": {
                "tap_action": {
                  "action": "call-service",
                  "service": "scene.turn_on",
                  "service_data": {
                    "entity_id": "{{ scene.entity_id }}"
                  }
                }
              }
            }{%- if not loop.last -%},{%- endif -%}
          {% endfor %}
    - type: custom:bubble-card
      card_type: separator
      name: Individual Lights
      icon: mdi:lightbulb
    - type: custom:auto-entities
      card:
        type: vertical-stack
      card_param: cards
      filter:
        include:
        - area: Living Room
          domain: light
          options:
            type: custom:bubble-card
            card_type: button
            button_type: slider
            show_state: true
            show_attribute: true
            attribute: brightness
            slider_live_update: false
            allow_light_slider_to_0: true
            sub_button: []
            tap_to_slide: true
        exclude:
        - entity_id: light.living_room
      sort:
        method: friendly_name
  - type: vertical-stack
    cards:
    - type: custom:bubble-card
      card_type: pop-up
      hash: '#main-bedroom-lights'
      name: Main Bedroom Lights
      icon: mdi:bed
      back_open: false
      close_by_clicking_outside: true
      bg_opacity: '88'
      bg_blur: '14'
      margin_top_mobile: '0'
      margin_top_desktop: '0'
      width_desktop: 540px
      is_sidebar_hidden: false
      auto_close: 60000
    - type: custom:bubble-card
      card_type: separator
      name: Room Control
      icon: mdi:lightbulb-group
    - type: custom:bubble-card
      card_type: button
      button_type: slider
      entity: light.master_bedroom
      name: All Lights
      icon: mdi:lightbulb-group
      show_state: true
      show_attribute: true
      attribute: brightness
      slider_live_update: false
      allow_light_slider_to_0: true
      sub_button:
      - entity: light.master_bedroom
        icon: mdi:palette
        name: Color
        tap_action:
          action: more-info
      tap_to_slide: true
    - type: custom:bubble-card
      card_type: separator
      name: Hue Scenes
      icon: mdi:palette
    - type: custom:auto-entities
      card:
        type: grid
        columns: 4
        square: false
      card_param: cards
      filter:
        template: |-
          {% set scenes = states.scene | selectattr('entity_id', 'match', 'scene.master_bedroom_') | list %}
          {% for scene in scenes | sort(attribute='attributes.friendly_name') %}
            {%- set scene_name = scene.attributes.friendly_name | replace('Master Bedroom ', '') | replace('Master bedroom ', '') | replace('Main Bedroom ', '') | replace('Main bedroom ', '') -%}
            {%- set icon_map = {
              'Heather': 'mdi:flower',
              'Read': 'mdi:book-open',
              'Chinatown': 'mdi:lantern',
              'Goodnight little lady': 'mdi:sleep',
              'Dimmed': 'mdi:brightness-3',
              'Bright': 'mdi:brightness-7',
              'Concentrate': 'mdi:target',
              'Energize': 'mdi:lightning-bolt',
              'Relax': 'mdi:spa',
              'Nightlight': 'mdi:weather-night',
              'Halloween': 'mdi:halloween',
              'Xmas': 'mdi:pine-tree',
              'Arctic aurora': 'mdi:aurora',
              'Spring blossom': 'mdi:flower',
              'Tropical twilight': 'mdi:palm-tree',
              'Savanna sunset': 'mdi:weather-sunset',
              'Nebula': 'mdi:creation',
              'Rainbow': 'mdi:looks',
              'Ibiza': 'mdi:party-popper',
              'Sweden': 'mdi:flag',
              'Sunday morning': 'mdi:coffee',
              'Champagne': 'mdi:glass-flute',
              'Lavender': 'mdi:flower-outline',
              'Peach': 'mdi:fruit-cherries',
              'Circle': 'mdi:circle',
              'Blue white': 'mdi:snowflake'
            } -%}
            {%- set icon = icon_map.get(scene_name, 'mdi:palette') -%}
            {
              "type": "custom:bubble-card",
              "card_type": "button",
              "button_type": "name",
              "name": "{{ scene_name }}",
              "icon": "{{ icon }}",
              "entity": "{{ scene.entity_id }}",
              "card_layout": "normal",
              "styles": "ha-card { height: 36px !important; } .bubble-container { height: 36px !important; } .bubble-name { font-size: 11px !important; } .bubble-icon-container { min-width: 28px !important; min-height: 28px !important; margin: 4px !important; } .bubble-icon { --mdc-icon-size: 18px !important; }",
              "button_action": {
                "tap_action": {
                  "action": "call-service",
                  "service": "scene.turn_on",
                  "service_data": {
                    "entity_id": "{{ scene.entity_id }}"
                  }
                }
              }
            }{%- if not loop.last -%},{%- endif -%}
          {% endfor %}
    - type: custom:bubble-card
      card_type: separator
      name: Individual Lights
      icon: mdi:lightbulb
    - type: custom:auto-entities
      card:
        type: vertical-stack
      card_param: cards
      filter:
        include:
        - entity_id: light.bedroom_ceiling_1
          options:
            type: custom:bubble-card
            card_type: button
            button_type: slider
            show_state: true
            show_attribute: true
            attribute: brightness
            slider_live_update: false
            allow_light_slider_to_0: true
            sub_button: []
            tap_to_slide: true
        - entity_id: light.bedroom_ceiling_2
          options:
            type: custom:bubble-card
            card_type: button
            button_type: slider
            show_state: true
            show_attribute: true
            attribute: brightness
            slider_live_update: false
            allow_light_slider_to_0: true
            sub_button: []
            tap_to_slide: true
        - entity_id: light.justin_bedside_table
          options:
            type: custom:bubble-card
            card_type: button
            button_type: slider
            show_state: true
            show_attribute: true
            attribute: brightness
            slider_live_update: false
            allow_light_slider_to_0: true
            sub_button: []
            tap_to_slide: true
        - entity_id: light.josh_bedside_table
          options:
            type: custom:bubble-card
            card_type: button
            button_type: slider
            show_state: true
            show_attribute: true
            attribute: brightness
            slider_live_update: false
            allow_light_slider_to_0: true
            sub_button: []
            tap_to_slide: true
      sort:
        method: friendly_name
- title: Floor Plan
  sections:
  - type: grid
    cards:
    - type: picture-elements
      elements:
      - type: state-icon
        entity: light.master_bedroom
        icon: mdi:circle-opacity
        style:
          top: 77%
          left: 79%
          --paper-item-icon-color: |-
            {% if is_state('light.master_bedroom', 'on') %}{% if state_attr('light.master_bedroom', 'rgb_color') %}rgb({{ state_attr('light.master_bedroom', 'rgb_color')[0] }}, {{ state_attr('light.master_bedroom', 'rgb_color')[1] }}, {{ state_attr('light.master_bedroom', 'rgb_color')[2] }}){% else %}orange{% endif %}{% else %}rgba(128,128,128,0.1){% endif %}
          filter: blur(12px)
          transform: scale(4)
          opacity: |-
            {% if is_state('light.master_bedroom', 'on') %}{{ (state_attr('light.master_bedroom', 'brightness') | float / 255) if state_attr('light.master_bedroom', 'brightness') else 0.8 }}{% else %}0.1{% endif %}
          pointer-events: none
        tap_action:
          action: none
        hold_action:
          action: none
      - type: state-icon
        entity: light.josh_bedside_table
        style:
          top: 87%
          left: 94%
          --paper-item-icon-color: |-
            {% if is_state('light.josh_bedside_table', 'on') %}{% if state_attr('light.josh_bedside_table', 'rgb_color') %}rgb({{ state_attr('light.josh_bedside_table', 'rgb_color')[0] }}, {{ state_attr('light.josh_bedside_table', 'rgb_color')[1] }}, {{ state_attr('light.josh_bedside_table', 'rgb_color')[2] }}){% else %}orange{% endif %}{% else %}grey{% endif %}
        tap_action:
          action: toggle
      - type: state-icon
        entity: light.justin_bedside_table
        style:
          top: 75%
          left: 94%
          --paper-item-icon-color: |-
            {% if is_state('light.justin_bedside_table', 'on') %}{% if state_attr('light.justin_bedside_table', 'rgb_color') %}rgb({{ state_attr('light.justin_bedside_table', 'rgb_color')[0] }}, {{ state_attr('light.justin_bedside_table', 'rgb_color')[1] }}, {{ state_attr('light.justin_bedside_table', 'rgb_color')[2] }}){% else %}orange{% endif %}{% else %}grey{% endif %}
        tap_action:
          action: toggle
      - type: state-icon
        entity: light.bedroom_ceiling_1
        style:
          top: 79%
          left: 83%
          --paper-item-icon-color: |-
            {% if is_state('light.bedroom_ceiling_1', 'on') %}{% if state_attr('light.bedroom_ceiling_1', 'rgb_color') %}rgb({{ state_attr('light.bedroom_ceiling_1', 'rgb_color')[0] }}, {{ state_attr('light.bedroom_ceiling_1', 'rgb_color')[1] }}, {{ state_attr('light.bedroom_ceiling_1', 'rgb_color')[2] }}){% else %}orange{% endif %}{% else %}grey{% endif %}
        tap_action:
          action: toggle
      - type: state-icon
        entity: light.bedroom_ceiling_2
        style:
          top: 82%
          left: 83%
          --paper-item-icon-color: |-
            {% if is_state('light.bedroom_ceiling_2', 'on') %}{% if state_attr('light.bedroom_ceiling_2', 'rgb_color') %}rgb({{ state_attr('light.bedroom_ceiling_2', 'rgb_color')[0] }}, {{ state_attr('light.bedroom_ceiling_2', 'rgb_color')[1] }}, {{ state_attr('light.bedroom_ceiling_2', 'rgb_color')[2] }}){% else %}orange{% endif %}{% else %}grey{% endif %}
        tap_action:
          action: toggle
      - type: state-icon
        entity: light.living_room
        icon: mdi:circle-opacity
        style:
          top: 60%
          left: 30%
          --paper-item-icon-color: |-
            {% if is_state('light.living_room', 'on') %}{% if state_attr('light.living_room', 'rgb_color') %}rgb({{ state_attr('light.living_room', 'rgb_color')[0] }}, {{ state_attr('light.living_room', 'rgb_color')[1] }}, {{ state_attr('light.living_room', 'rgb_color')[2] }}){% else %}orange{% endif %}{% else %}rgba(128,128,128,0.1){% endif %}
          filter: blur(12px)
          transform: scale(5)
          opacity: |-
            {% if is_state('light.living_room', 'on') %}{{ 0.3 + ((state_attr('light.living_room', 'brightness') | float / 255) * 0.7) if state_attr('light.living_room', 'brightness') else 0.9 }}{% else %}0.1{% endif %}
          pointer-events: none
        tap_action:
          action: none
        hold_action:
          action: none
      - type: state-icon
        entity: light.living_room_left
        style:
          top: 60%
          left: 25%
          --paper-item-icon-color: |-
            {% if is_state('light.living_room_left', 'on') %}{% if state_attr('light.living_room_left', 'rgb_color') %}rgb({{ state_attr('light.living_room_left', 'rgb_color')[0] }}, {{ state_attr('light.living_room_left', 'rgb_color')[1] }}, {{ state_attr('light.living_room_left', 'rgb_color')[2] }}){% else %}orange{% endif %}{% else %}grey{% endif %}
          filter: |-
            {% if is_state('light.living_room_left', 'on') %}drop-shadow(0 0 8px currentColor){% else %}none{% endif %}
        tap_action:
          action: toggle
      - type: state-icon
        entity: light.living_room_right
        style:
          top: 60%
          left: 35%
          --paper-item-icon-color: |-
            {% if is_state('light.living_room_right', 'on') %}{% if state_attr('light.living_room_right', 'rgb_color') %}rgb({{ state_attr('light.living_room_right', 'rgb_color')[0] }}, {{ state_attr('light.living_room_right', 'rgb_color')[1] }}, {{ state_attr('light.living_room_right', 'rgb_color')[2] }}){% else %}orange{% endif %}{% else %}grey{% endif %}
          filter: |-
            {% if is_state('light.living_room_right', 'on') %}drop-shadow(0 0 8px currentColor){% else %}none{% endif %}
        tap_action:
          action: toggle
      - type: state-icon
        entity: light.living_room_lamp
        style:
          top: 55%
          left: 20%
          --paper-item-icon-color: |-
            {% if is_state('light.living_room_lamp', 'on') %}{% if state_attr('light.living_room_lamp', 'rgb_color') %}rgb({{ state_attr('light.living_room_lamp', 'rgb_color')[0] }}, {{ state_attr('light.living_room_lamp', 'rgb_color')[1] }}, {{ state_attr('light.living_room_lamp', 'rgb_color')[2] }}){% else %}orange{% endif %}{% else %}grey{% endif %}
        tap_action:
          action: toggle
      - type: state-icon
        entity: light.play_gradient_tube
        icon: mdi:television-ambient-light
        style:
          top: 65%
          left: 30%
          --paper-item-icon-color: |-
            {% if is_state('light.play_gradient_tube', 'on') %}{% if state_attr('light.play_gradient_tube', 'rgb_color') %}rgb({{ state_attr('light.play_gradient_tube', 'rgb_color')[0] }}, {{ state_attr('light.play_gradient_tube', 'rgb_color')[1] }}, {{ state_attr('light.play_gradient_tube', 'rgb_color')[2] }}){% else %}orange{% endif %}{% else %}grey{% endif %}
          filter: |-
            {% if is_state('light.play_gradient_tube', 'on') %}drop-shadow(0 0 15px currentColor){% else %}none{% endif %}
        tap_action:
          action: toggle
        hold_action:
          action: more-info
      - type: state-icon
        entity: light.signe_gradient_floor
        icon: mdi:floor-lamp
        style:
          top: 58%
          left: 38%
          --paper-item-icon-color: |-
            {% if is_state('light.signe_gradient_floor', 'on') %}{% if state_attr('light.signe_gradient_floor', 'rgb_color') %}rgb({{ state_attr('light.signe_gradient_floor', 'rgb_color')[0] }}, {{ state_attr('light.signe_gradient_floor', 'rgb_color')[1] }}, {{ state_attr('light.signe_gradient_floor', 'rgb_color')[2] }}){% else %}orange{% endif %}{% else %}grey{% endif %}
          filter: |-
            {% if is_state('light.signe_gradient_floor', 'on') %}drop-shadow(0 0 12px currentColor){% else %}none{% endif %}
        tap_action:
          action: toggle
      image: /local/floorplan/interior.png
      grid_options:
        columns: full
        rows: full
      dark_mode_image: /local/floorplan/interior.png
    column_span: 2
  - type: grid
    cards:
    - type: picture-elements
      elements: []
      image: /local/floorplan/outside.png
      dark_mode_image: /local/floorplan/outside.png
      grid_options:
        columns: full
        rows: full
    column_span: 2
  path: floor-plan
- title: Map
  path: map
  strategy:
    type: map
